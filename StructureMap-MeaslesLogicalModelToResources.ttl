@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://worldhealthorganization.github.io/smart-ot/StructureMap/MeaslesLogicalModelToResources> a fhir:StructureMap ;
  fhir:nodeRole fhir:treeRoot ;
  fhir:id [ fhir:v "MeaslesLogicalModelToResources"] ; # 
  fhir:text [
     fhir:status [ fhir:v "generated" ] ;
     fhir:div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><pre class=\"fml\">\r\n<b>map</b><span style=\"color: navy\"> &quot;</span>http://worldhealthorganization.github.io/smart-ot/StructureMap/MeaslesLogicalModelToResources<span style=\"color: navy\">&quot; = &quot;</span>MeaslesLogicalModelToResources<span style=\"color: navy\">&quot;\r\n\r\n</span><b>uses</b><span style=\"color: navy\"> &quot;</span>http://worldhealthorganization.github.io/smart-ot/StructureDefinition/SOTMeaslesF<span style=\"color: navy\">&quot; </span><b>alias </b>MeaslesLogicalModel <b>as </b><b>source</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"http://hl7.org/fhir/R4/bundle.html\" title=\"Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a><span style=\"color: navy\">&quot; </span><b>alias </b>MeaslesCIFBundle <b>as </b><b>target</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureDefinition-MeaslesCIFComposition.html\" title=\"Measles Case Investigation Form Composition\">http://worldhealthorganization.github.io/smart-ot/StructureDefinition/MeaslesCIFComposition</a><span style=\"color: navy\">&quot; </span><b>alias </b>MeaslesCIFComposition <b>as </b><b>target</b>\r\n\r\n<b>imports</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureMap-MetaDataTypesHelper.html\" title=\"MetaDataTypesHelper\">http://worldhealthorganization.github.io/smart-ot/StructureMap/MetaDataTypesHelper</a><span style=\"color: navy\">&quot;\r\n</span>\r\n<b>group </b>MeaslesLogicalModelToResources<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">lm</span><span style=\"color: navy\"> : </span>SOTMeasles, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  lm<span style=\"color: navy\"><b> -&gt; </b></span>bundle.type = <span style=\"color: blue\">'document'</span> <i>&quot;set bundle type&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: #b36b00\" title=\"This element was not defined prior to R5\">// lm.ReportingSource as reportingSource then {     reportingSource.DateReportedNational as date -&gt; bundle.timestamp = date &quot;set date&quot;;   } &quot;set timestamp&quot;;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">bid</span><span style=\"color: navy\">, </span> bundle.id = <span style=\"color: maroon\">bid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">cid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">pid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">prid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">oid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">eid</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Composition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">cid</span><span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      lm<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">lm</span><b> then </b>LmToComposition<span style=\"color: navy\">(</span><span style=\"color: maroon\">lm</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">cid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">prid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">patient</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        lm.Demographics<b> as </b><span style=\"color: maroon\">demographics</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">demographics</span><b> then </b>DemographicsToPatient<span style=\"color: navy\">(</span><span style=\"color: maroon\">demographics</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;create patient&quot;</i><span style=\"color: navy\">;</span>\r\n        lm<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">patient</span> <i>&quot;set patient as entry&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;map patient resource&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">prid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Practitioner'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">practitioner</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        lm.ReportingSource<b> as </b><span style=\"color: maroon\">reportingSource</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">reportingSource</span><b> then </b>ReportingSourceToPractitioner<span style=\"color: navy\">(</span><span style=\"color: maroon\">reportingSource</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">practitioner</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">prid</span><span style=\"color: navy\">)</span> <i>&quot;create practitioner&quot;</i><span style=\"color: navy\">;</span>\r\n        lm<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">practitioner</span> <i>&quot;set practitioner as entry&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;map practitioner resource&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Organization'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">organization</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        lm.ReportingSource<b> as </b><span style=\"color: maroon\">reportingSource</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">reportingSource</span><b> then </b>ReportingSourceToOrganization<span style=\"color: navy\">(</span><span style=\"color: maroon\">reportingSource</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">organization</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span> <i>&quot;create organization&quot;</i><span style=\"color: navy\">;</span>\r\n        lm<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">organization</span> <i>&quot;set organization as entry&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;map organization resource&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Encounter'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">encounter</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        lm.ReportingSource<b> as </b><span style=\"color: maroon\">reportingSource</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          reportingSource.DateOfConsultation<b> as </b><span style=\"color: maroon\">date</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            date<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span> type.code = <span style=\"color: blue\">'AMB'</span><span style=\"color: navy\">, </span> type.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/v3-ActCode'</span><span style=\"color: navy\">, </span> type.display = <span style=\"color: blue\">'ambulatory'</span><b> then </b>createCompositionEncounterResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">date</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">encounter</span><span style=\"color: navy\">)</span> <i>&quot;create encounter&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;set encounter&quot;</i><span style=\"color: navy\">;</span>\r\n          reportingSource.DateOfHomeVisit<b> as </b><span style=\"color: maroon\">date</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            date<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span> type.code = <span style=\"color: blue\">'HH'</span><span style=\"color: navy\">, </span> type.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/v3-ActCode'</span><span style=\"color: navy\">, </span> type.display = <span style=\"color: blue\">'home health'</span><b> then </b>createCompositionEncounterResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">date</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">encounter</span><span style=\"color: navy\">)</span> <i>&quot;create encounter&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;set encounter&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set encounter&quot;</i><span style=\"color: navy\">;</span>\r\n        lm<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">encounter</span> <i>&quot;set encounter as entry&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;map encounter resource&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">lm</span><b> then </b>mapClinicalToObservations<span style=\"color: navy\">(</span><span style=\"color: maroon\">lm</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set clinical data&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">lm</span><b> then </b>mapLabsToDiagnosticReport<span style=\"color: navy\">(</span><span style=\"color: maroon\">lm</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set labs data&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">lm</span><b> then </b>mapVaccinationStatusToImmunization<span style=\"color: navy\">(</span><span style=\"color: maroon\">lm</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set immunization data&quot;</i><span style=\"color: navy\">;</span>\r\n      lm<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">lm</span><b> then </b>mapClassificationToConditions<span style=\"color: navy\">(</span><span style=\"color: maroon\">lm</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span> <i>&quot;set classification&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;map composition resource&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set entries&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>mapClassificationToConditions<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">lm</span><span style=\"color: navy\"> : </span>MeaslesLogicalModel, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">composition</span><span style=\"color: navy\"> : </span>MeaslesCIFComposition, <b>source</b> <span style=\"color: maroon\">pid</span>, <b>source</b> <span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  lm<span style=\"color: navy\"><b> -&gt; </b></span> composition.section<b> as </b><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span> section.title = <span style=\"color: blue\">'Classification'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm.Classification<b> as </b><span style=\"color: maroon\">classification</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">id</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      classification<span style=\"color: navy\"><b> -&gt; </b></span>condition.id = <span style=\"color: maroon\">id</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n      classification<span style=\"color: navy\"><b> -&gt; </b></span> condition.verificationStatus<b> as </b><span style=\"color: maroon\">tgtStatus</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">status</span><span style=\"color: navy\">, </span> status.code = <span style=\"color: blue\">'confirmed'</span><span style=\"color: navy\">, </span> status.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-ver-status'</span><span style=\"color: navy\">, </span> status.display = <span style=\"color: blue\">'Confirmed'</span><b> then </b>mapCodingtoCodeableConcept<span style=\"color: navy\">(</span><span style=\"color: maroon\">status</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">tgtStatus</span><span style=\"color: navy\">)</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n      classification<span style=\"color: navy\"><b> -&gt; </b></span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n      classification.FinalClassification<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span>condition.code<b> as </b><span style=\"color: maroon\">code</span><b> then </b>mapCodingtoCodeableConcept<span style=\"color: navy\">(</span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">)</span> <i>&quot;set code&quot;</i><span style=\"color: navy\">;</span>\r\n      classification<span style=\"color: navy\"><b> -&gt; </b></span> condition.encounter<b> as </b><span style=\"color: maroon\">encounter</span><span style=\"color: navy\">, </span> encounter.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Encounter/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n      classification<span style=\"color: navy\"><b> -&gt; </b></span> condition.category<b> as </b><span style=\"color: maroon\">tgt</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">status</span><span style=\"color: navy\">, </span> status.code = <span style=\"color: blue\">'encounter-diagnosis'</span><span style=\"color: navy\">, </span> status.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> status.display = <span style=\"color: blue\">'Encounter Diagnosis'</span><b> then </b>mapCodingtoCodeableConcept<span style=\"color: navy\">(</span><span style=\"color: maroon\">status</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">tgt</span><span style=\"color: navy\">)</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n      classification.ClassificationDate<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span>condition.recordedDate = <span style=\"color: maroon\">date</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n      classification.ClassifiedBy<b> as </b><span style=\"color: maroon\">person</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">rpid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">rpid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'RelatedPerson/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">rpid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'RelatedPerson'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">recorder</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        person<span style=\"color: navy\"><b> -&gt; </b></span>recorder.id = <span style=\"color: maroon\">rpid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n        person<span style=\"color: navy\"><b> -&gt; </b></span> recorder.name<b> as </b><span style=\"color: maroon\">targetName</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'HumanName'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">name</span><span style=\"color: navy\">, </span> name.text = <span style=\"color: maroon\">person</span><b> then </b>humanNameToHumanName<span style=\"color: navy\">(</span><span style=\"color: maroon\">name</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">targetName</span><span style=\"color: navy\">)</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n        person<span style=\"color: navy\"><b> -&gt; </b></span> recorder.patient<b> as </b><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span> patient.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set patient&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set person&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;Set classification&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set section&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>mapContactTracing<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">lm</span><span style=\"color: navy\"> : </span>MeaslesLogicalModel, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">composition</span><span style=\"color: navy\"> : </span>MeaslesCIFComposition, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  lm<span style=\"color: navy\"><b> -&gt; </b></span> composition.section<b> as </b><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span> section.title = <span style=\"color: blue\">'Contact Tracing'</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>mapClinicalToObservations<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">lm</span><span style=\"color: navy\"> : </span>SOTMeasles, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">composition</span><span style=\"color: navy\"> : </span>Composition, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  lm<span style=\"color: navy\"><b> -&gt; </b></span> composition.section<b> as </b><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span> section.title = <span style=\"color: blue\">'Clinical Data, Follow up and Treatment'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm.Clinical<b> as </b><span style=\"color: maroon\">clinical</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">clinical</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      clinical.Fever<b> as </b><span style=\"color: maroon\">fever</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        fever<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        fever<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE66'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Fever'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          fever<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">fever</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">fever</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n          clinical.FeverOnsetDate<b> as </b><span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Period'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">period</span><span style=\"color: navy\">, </span> period.start = <span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\">, </span> observation.effective = <span style=\"color: maroon\">period</span> <i>&quot;set start date&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set fever&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.Temperature<b> as </b><span style=\"color: maroon\">temperature</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        temperature<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        temperature<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE70'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Temperature'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          temperature<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">temperature</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">temperature</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set Temperature&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.Rash<b> as </b><span style=\"color: maroon\">rash</span><b> where </b>code != 'Yes'<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        rash<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        rash<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE72'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Rash'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          rash<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">rash</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">rash</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set Rash&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.TypeOfRash<b> as </b><span style=\"color: maroon\">haemorrhagic</span><b> where </b>code = 'Haemorrhagic'<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        haemorrhagic<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        haemorrhagic<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'Haemorrhagic'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/RashType'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Haemorrhagic'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          haemorrhagic<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span> ValueCoding.code = <span style=\"color: blue\">'Yes'</span><span style=\"color: navy\">, </span> ValueCoding.system = <span style=\"color: blue\">'http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown'</span><span style=\"color: navy\">, </span> ValueCoding.display = <span style=\"color: blue\">'Yes'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            haemorrhagic<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">haemorrhagic</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;set value&quot;</i><span style=\"color: navy\">;</span>\r\n          clinical.RashOnsetDate<b> as </b><span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Period'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">period</span><span style=\"color: navy\">, </span> period.start = <span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\">, </span> observation.effective = <span style=\"color: maroon\">period</span> <i>&quot;set start date&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set haemorrhagic&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.TypeOfRash<b> as </b><span style=\"color: maroon\">erythematous</span><b> where </b>code = 'Erythematous'<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        erythematous<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        erythematous<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'Erythematous'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/RashType'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Erythematous'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          erythematous<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span> ValueCoding.code = <span style=\"color: blue\">'Yes'</span><span style=\"color: navy\">, </span> ValueCoding.system = <span style=\"color: blue\">'http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown'</span><span style=\"color: navy\">, </span> ValueCoding.display = <span style=\"color: blue\">'Yes'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            erythematous<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">erythematous</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;set value&quot;</i><span style=\"color: navy\">;</span>\r\n          clinical.RashOnsetDate<b> as </b><span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Period'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">period</span><span style=\"color: navy\">, </span> period.start = <span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\">, </span> observation.effective = <span style=\"color: maroon\">period</span> <i>&quot;set start date&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set erythematous&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.TypeOfRash<b> as </b><span style=\"color: maroon\">vesicularPustular</span><b> where </b>code = 'VesicularPustular'<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        vesicularPustular<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        vesicularPustular<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'Vesicular-pustular'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/RashType'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Vesicular Pustular'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          vesicularPustular<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span> ValueCoding.code = <span style=\"color: blue\">'Yes'</span><span style=\"color: navy\">, </span> ValueCoding.system = <span style=\"color: blue\">'http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown'</span><span style=\"color: navy\">, </span> ValueCoding.display = <span style=\"color: blue\">'Yes'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            vesicularPustular<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">vesicularPustular</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;set value&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        clinical.RashOnsetDate<b> as </b><span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Period'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">period</span><span style=\"color: navy\">, </span> period.start = <span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\">, </span> observation.effective = <span style=\"color: maroon\">period</span> <i>&quot;set start date&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set vesicularPustular&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.TypeOfRash<b> as </b><span style=\"color: maroon\">petechialPurpuric</span><b> where </b>code = 'PetechialPurpuric'<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        petechialPurpuric<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        petechialPurpuric<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'Petechial-purpuric'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/RashType'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Petechial Purpuric'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          petechialPurpuric<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span> ValueCoding.code = <span style=\"color: blue\">'Yes'</span><span style=\"color: navy\">, </span> ValueCoding.system = <span style=\"color: blue\">'http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown'</span><span style=\"color: navy\">, </span> ValueCoding.display = <span style=\"color: blue\">'Yes'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            petechialPurpuric<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">petechialPurpuric</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">petechialPurpuric</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;set value&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        clinical.RashOnsetDate<b> as </b><span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Period'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">period</span><span style=\"color: navy\">, </span> period.start = <span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\">, </span> observation.effective = <span style=\"color: maroon\">period</span> <i>&quot;set start date&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set petechialPurpuric&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.TypeOfRash<b> as </b><span style=\"color: maroon\">other</span><b> where </b>code = 'Other'<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        other<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        other<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'Other'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/RashType'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Rash'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          other<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span> ValueCoding.code = <span style=\"color: blue\">'Yes'</span><span style=\"color: navy\">, </span> ValueCoding.system = <span style=\"color: blue\">'http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown'</span><span style=\"color: navy\">, </span> ValueCoding.display = <span style=\"color: blue\">'Yes'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>            other<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">other</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">ValueCoding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n          <span style=\"color: navy\">}</span> <i>&quot;set value&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set other&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.Cough<b> as </b><span style=\"color: maroon\">cough</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        cough<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        cough<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE84'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Cough'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          cough<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">cough</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">cough</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set cough&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.Conjunctivitis<b> as </b><span style=\"color: maroon\">conjunctivitis</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        conjunctivitis<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        conjunctivitis<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE88'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Conjunctivitis'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          conjunctivitis<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">conjunctivitis</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">conjunctivitis</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set conjunctivitis&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.Coryza<b> as </b><span style=\"color: maroon\">coryza</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        coryza<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        coryza<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE92'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Coryza'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          coryza<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">coryza</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">coryza</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set coryza&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.KoplikSpots<b> as </b><span style=\"color: maroon\">koplikSpots</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        koplikSpots<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        koplikSpots<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE96'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Koplik Spots'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          koplikSpots<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">koplikSpots</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">koplikSpots</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set koplikSpots&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.Lymphadenopathy<b> as </b><span style=\"color: maroon\">lymphadenopathy</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        lymphadenopathy<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        lymphadenopathy<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE100'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Lymphadenopathy'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          lymphadenopathy<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">lymphadenopathy</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">lymphadenopathy</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set lymphadenopathy&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.JointPain<b> as </b><span style=\"color: maroon\">jointPain</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        jointPain<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        jointPain<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE104'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Joint Pain'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          jointPain<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">jointPain</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">jointPain</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set jointPain&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.PregnancyStatus<b> as </b><span style=\"color: maroon\">pregnancy</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        pregnancy<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        pregnancy<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE108'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Pregnancy'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          pregnancy<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">pregnancy</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">pregnancy</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set pregnancy&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.PregnancyStatus<b> as </b><span style=\"color: maroon\">pregnancy</span><b> where </b>code = 'Yes'<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        pregnancy<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        clinical.GestationWeeks<b> as </b><span style=\"color: maroon\">weeks</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE112'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Weeks Pregnant'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          weeks<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">weeks</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">weeks</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set pregnancy weeks&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical.Outcome<b> as </b><span style=\"color: maroon\">outcome</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        outcome<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        outcome<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'DE121'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Outcome'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          outcome<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">outcome</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">outcome</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n        clinical.DateOfDeath<b> as </b><span style=\"color: maroon\">onsetDate</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.effective = <span style=\"color: maroon\">onsetDate</span> <i>&quot;set start date&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set outcome&quot;</i><span style=\"color: navy\">;</span>\r\n      clinical<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">clinical</span><b> then </b>mapEncounters<span style=\"color: navy\">(</span><span style=\"color: maroon\">clinical</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set encounter&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set clinical&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set section&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>createObservationResource<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>source</b> <span style=\"color: maroon\">coding</span><span style=\"color: navy\"> : </span>Coding, <b>target</b> <span style=\"color: maroon\">observation</span><span style=\"color: navy\"> : </span>Observation, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  src<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding = <span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> observation.code = <span style=\"color: maroon\">code</span> <i>&quot;set code&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> value.coding = <span style=\"color: maroon\">src</span><span style=\"color: navy\">, </span> observation.value = <span style=\"color: maroon\">value</span> <i>&quot;set value&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span>observation.status = <span style=\"color: blue\">'registered'</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span>observation.subject<b> as </b><span style=\"color: maroon\">subject</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    src<span style=\"color: navy\"><b> -&gt; </b></span>subject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>mapLabsToDiagnosticReport<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">lm</span><span style=\"color: navy\"> : </span>MeaslesLogicalModel, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">composition</span><span style=\"color: navy\"> : </span>MeaslesCIFComposition, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  lm<span style=\"color: navy\"><b> -&gt; </b></span> composition.section<b> as </b><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span> section.title = <span style=\"color: blue\">'Specimens &amp; Laboratory Testing'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm.LaboratoryResults<b> as </b><span style=\"color: maroon\">labs</span><span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">id</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'DiagnosticReport/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'DiagnosticReport'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">diagnosticReport</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      labs<span style=\"color: navy\"><b> -&gt; </b></span>diagnosticReport.id = <span style=\"color: maroon\">id</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n      labs<span style=\"color: navy\"><b> -&gt; </b></span>diagnosticReport.status = <span style=\"color: blue\">'registered'</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n      labs<span style=\"color: navy\"><b> -&gt; </b></span> diagnosticReport.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n      labs.Antigen<b> as </b><span style=\"color: maroon\">antigen</span><span style=\"color: navy\"><b> -&gt; </b></span>diagnosticReport.code<b> as </b><span style=\"color: maroon\">code</span><b> then </b>mapCodingtoCodeableConcept<span style=\"color: navy\">(</span><span style=\"color: maroon\">antigen</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">)</span> <i>&quot;set code&quot;</i><span style=\"color: navy\">;</span>\r\n      labs<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">id</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> diagnosticReport.specimen<b> as </b><span style=\"color: maroon\">refSpecimen</span><span style=\"color: navy\">, </span> refSpecimen.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Specimen/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Specimen'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">specimen</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        labs<span style=\"color: navy\"><b> -&gt; </b></span>specimen.id = <span style=\"color: maroon\">id</span> <i>&quot;Set idn&quot;</i><span style=\"color: navy\">;</span>\r\n        labs.SpecimenCollectionDate<b> as </b><span style=\"color: maroon\">collectDate</span><span style=\"color: navy\"><b> -&gt; </b></span> specimen.collection<b> as </b><span style=\"color: maroon\">collection</span><span style=\"color: navy\">, </span> collection.collected = <span style=\"color: maroon\">collectDate</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">// </span><span style=\"color: green\">labs.SpecimenSentDate as sentDate -&gt;</span>\r\n        labs.SpecimenRecdDate<b> as </b><span style=\"color: maroon\">recdDate</span><span style=\"color: navy\"><b> -&gt; </b></span>specimen.receivedTime = <span style=\"color: maroon\">recdDate</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n        labs.SampleId<b> as </b><span style=\"color: maroon\">sampleId</span><span style=\"color: navy\"><b> -&gt; </b></span> specimen.identifier<b> as </b><span style=\"color: maroon\">identifier</span><span style=\"color: navy\">, </span> identifier.value = <span style=\"color: maroon\">sampleId</span> <i>&quot;set identifier&quot;</i><span style=\"color: navy\">;</span>\r\n        labs.SampleType<b> as </b><span style=\"color: maroon\">sampleType</span><span style=\"color: navy\"><b> -&gt; </b></span>specimen.type = <span style=\"color: maroon\">sampleType</span> <i>&quot;set type&quot;</i><span style=\"color: navy\">;</span>\r\n        labs.SpecimenNumber<b> as </b><span style=\"color: maroon\">number</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          number.display<b> as </b><span style=\"color: maroon\">text</span><span style=\"color: navy\"><b> -&gt; </b></span> specimen.note<b> as </b><span style=\"color: maroon\">note</span><span style=\"color: navy\">, </span> note.text = <span style=\"color: maroon\">text</span> <i>&quot;set note&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set note&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set specimen&quot;</i><span style=\"color: navy\">;</span>\r\n      labs<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">id</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> diagnosticReport.performer<b> as </b><span style=\"color: maroon\">performer</span><span style=\"color: navy\">, </span> performer.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Organization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Organization'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">perfOrg</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        labs.LabName<b> as </b><span style=\"color: maroon\">labName</span><span style=\"color: navy\"><b> -&gt; </b></span>perfOrg.name = <span style=\"color: maroon\">labName</span> <i>&quot;set name&quot;</i><span style=\"color: navy\">;</span>\r\n        labs<span style=\"color: navy\"><b> -&gt; </b></span>perfOrg.id = <span style=\"color: maroon\">id</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set performer&quot;</i><span style=\"color: navy\">;</span>\r\n      labs<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> diagnosticReport.result<b> as </b><span style=\"color: maroon\">result</span><span style=\"color: navy\">, </span> result.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">obsid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        labs<span style=\"color: navy\"><b> -&gt; </b></span>observation.id = <span style=\"color: maroon\">obsid</span> <i>&quot;set obsid&quot;</i><span style=\"color: navy\">;</span>\r\n        labs.Antigen<b> as </b><span style=\"color: maroon\">antigen</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">antigen</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          labs.Results<b> as </b><span style=\"color: maroon\">result</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">result</span><b> then </b>createObservationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">result</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">antigen</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set obs&quot;</i><span style=\"color: navy\">;</span>\r\n          labs.LabResultsDate<b> as </b><span style=\"color: maroon\">resultDate</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.effective = <span style=\"color: maroon\">resultDate</span> <i>&quot;set start date&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set antigen&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set results&quot;</i><span style=\"color: navy\">;</span>\r\n      labs.Antigen<b> as </b><span style=\"color: maroon\">antigen</span><span style=\"color: navy\"><b> -&gt; </b></span>diagnosticReport.code = <span style=\"color: maroon\">antigen</span> <i>&quot;set code&quot;</i><span style=\"color: navy\">;</span>\r\n      labs.LabResultsDate<b> as </b><span style=\"color: maroon\">resultDate</span><span style=\"color: navy\"><b> -&gt; </b></span>diagnosticReport.effective = <span style=\"color: maroon\">resultDate</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set diagnosticReport&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set section&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>createImmunizationResource<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">vax</span><span style=\"color: navy\"> : </span>SOTMeaslesVaccinationStatus, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">section</span><span style=\"color: navy\"> : </span>Element, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  vax<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">id</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">id</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">immunization</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    vax<span style=\"color: navy\"><b> -&gt; </b></span>immunization.id = <span style=\"color: maroon\">id</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n    vax<span style=\"color: navy\"><b> -&gt; </b></span>immunization.status = <span style=\"color: blue\">'completed'</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n    vax<span style=\"color: navy\"><b> -&gt; </b></span>immunization.vaccineCode<b> as </b><span style=\"color: maroon\">code</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      vax.VaccineType<b> as </b><span style=\"color: maroon\">vaccineType</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">vaccineType</span><b> then </b>mapCodingtoCodeableConcept<span style=\"color: navy\">(</span><span style=\"color: maroon\">vaccineType</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">code</span><span style=\"color: navy\">)</span> <i>&quot;set code&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n    vax.Source<b> as </b><span style=\"color: maroon\">source</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.reportOrigin<b> as </b><span style=\"color: maroon\">origin</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      source<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">source</span><b> then </b>mapCodingtoCodeableConcept<span style=\"color: navy\">(</span><span style=\"color: maroon\">source</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">origin</span><span style=\"color: navy\">)</span> <i>&quot;set report origin&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n    vax.LastDoseDate<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.occurrence = <span style=\"color: maroon\">date</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n    vax.NumberOfDoses<b> as </b><span style=\"color: maroon\">doses</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      doses.display<b> as </b><span style=\"color: maroon\">seriesDose</span><span style=\"color: navy\"><b> -&gt; </b></span> immunization.protocolApplied<b> as </b><span style=\"color: maroon\">protocol</span><span style=\"color: navy\">, </span> protocol.series = <span style=\"color: maroon\">seriesDose</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set dosenumber&quot;</i><span style=\"color: navy\">;</span>\r\n    vax<span style=\"color: navy\"><b> -&gt; </b></span> immunization.patient<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;ad&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>mapVaccinationStatusToImmunization<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">lm</span><span style=\"color: navy\"> : </span>MeaslesLogicalModel, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">composition</span><span style=\"color: navy\"> : </span>MeaslesCIFComposition, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  lm<span style=\"color: navy\"><b> -&gt; </b></span> composition.section<b> as </b><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span> section.title = <span style=\"color: blue\">'Vaccination History'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm.VaccinationStatus<b> as </b><span style=\"color: maroon\">vax</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      vax.NumberOfDoses<b> as </b><span style=\"color: maroon\">doses</span><b> where </b>code = '99'<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n      vax.NumberOfDoses<b> as </b><span style=\"color: maroon\">doses</span><b> where </b>code = '1'<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        vax.LastDoseDate<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">date</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do1&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set&quot;</i><span style=\"color: navy\">;</span>\r\n      vax.NumberOfDoses<b> as </b><span style=\"color: maroon\">doses</span><b> where </b>code = '2'<b> then</b><span style=\"color: navy\"> {\r\n</span>        doses<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do2&quot;</i><span style=\"color: navy\">;</span>\r\n        vax.LastDoseDate<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">date</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set doses&quot;</i><span style=\"color: navy\">;</span>\r\n      vax.NumberOfDoses<b> as </b><span style=\"color: maroon\">doses</span><b> where </b>code = '3'<b> then</b><span style=\"color: navy\"> {\r\n</span>        vax<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n        vax<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n        vax.LastDoseDate<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">date</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set doses&quot;</i><span style=\"color: navy\">;</span>\r\n      vax.NumberOfDoses<b> as </b><span style=\"color: maroon\">doses</span><b> where </b>code = '4'<b> then</b><span style=\"color: navy\"> {\r\n</span>        vax<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n        vax<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n        vax<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">doses</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n        vax.LastDoseDate<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">date</span><b> then </b>createImmunizationResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">vax</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;do&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set doses&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set section&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>LmToComposition<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">lm</span><span style=\"color: navy\"> : </span>SOTMeasles, <b>target</b> <span style=\"color: maroon\">composition</span><span style=\"color: navy\"> : </span>Composition, <b>source</b> <span style=\"color: maroon\">cid</span>, <b>source</b> <span style=\"color: maroon\">pid</span>, <b>source</b> <span style=\"color: maroon\">prid</span>, <b>source</b> <span style=\"color: maroon\">oid</span>, <b>source</b> <span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  cid<span style=\"color: navy\"><b> -&gt; </b></span>composition.id = <span style=\"color: maroon\">cid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span>composition.status = <span style=\"color: blue\">'final'</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span>composition.title = <span style=\"color: blue\">'PAHO Measles Case Investigation Form'</span> <i>&quot;set title&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'55751-2'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Public health Case report'</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'CodeableConcept'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding = <span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> composition.type = <span style=\"color: maroon\">code</span> <i>&quot;set type&quot;</i><span style=\"color: navy\">;</span>\r\n  lm.ReportingSource<b> as </b><span style=\"color: maroon\">reportingSource</span><span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">reportingSource</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    reportingSource.DateReportedLocal<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span>composition.date = <span style=\"color: maroon\">date</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set date reported local&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span>composition.subject<b> as </b><span style=\"color: maroon\">subject</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm<span style=\"color: navy\"><b> -&gt; </b></span>subject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span>composition.author<b> as </b><span style=\"color: maroon\">practitioner</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm<span style=\"color: navy\"><b> -&gt; </b></span>practitioner.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Practitioner/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">prid</span><span style=\"color: navy\">)</span> <i>&quot;set author practitioner&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set author practitioner&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span>composition.author<b> as </b><span style=\"color: maroon\">institution</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm<span style=\"color: navy\"><b> -&gt; </b></span>institution.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Organization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span> <i>&quot;set author institution&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set author org&quot;</i><span style=\"color: navy\">;</span>\r\n  lm<span style=\"color: navy\"><b> -&gt; </b></span>composition.encounter<b> as </b><span style=\"color: maroon\">encounter</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    lm<span style=\"color: navy\"><b> -&gt; </b></span>encounter.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Encounter/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span> <i>&quot;set encounter&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set encounter&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>DemographicsToPatient<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">demographics</span><span style=\"color: navy\"> : </span>DemographicsLogicalModel, <b>target</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>MeaslesPatient, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  pid<span style=\"color: navy\"><b> -&gt; </b></span>patient.id = <span style=\"color: maroon\">pid</span> <i>&quot;set patient id&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.Name<b> as </b><span style=\"color: maroon\">sourceName</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.name<b> as </b><span style=\"color: maroon\">targetName</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    sourceName<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">sourceName</span><b> then </b>humanNameToHumanName<span style=\"color: navy\">(</span><span style=\"color: maroon\">sourceName</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">targetName</span><span style=\"color: navy\">)</span> <i>&quot;Copy name&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;Set name&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.DateOfBirth<b> as </b><span style=\"color: maroon\">dob</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.birthDate = <span style=\"color: maroon\">dob</span> <i>&quot;set date of birth&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.Sex<b> as </b><span style=\"color: maroon\">sex</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.gender = <span style=\"color: maroon\">sex</span> <i>&quot;set sex&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.CountryOfBirth<b> as </b><span style=\"color: maroon\">cob</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.CountryOfBirth = <span style=\"color: maroon\">cob</span> <i>&quot;set CountryOfBirth&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.Landmark<b> as </b><span style=\"color: maroon\">landmark</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    landmark<span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/StructureDefinition/Landmark'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">landmark</span> <i>&quot;set landmark value&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set landmark&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.Guardian<b> as </b><span style=\"color: maroon\">guardian</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    guardian<span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/StructureDefinition/Guardian'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">guardian</span> <i>&quot;set guardian value&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set guardian&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.Telephone<b> as </b><span style=\"color: maroon\">sourcePhone</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.telecom<b> as </b><span style=\"color: maroon\">targetPhone</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    sourcePhone<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">sourcePhone</span><b> then </b>contactPointToContactPoint<span style=\"color: navy\">(</span><span style=\"color: maroon\">sourcePhone</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">targetPhone</span><span style=\"color: navy\">)</span> <i>&quot;Copy contact&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;Set contact&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.PlaceOfResidence<b> as </b><span style=\"color: maroon\">sourceAddress</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.address<b> as </b><span style=\"color: maroon\">targetAddress</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    sourceAddress<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">sourceAddress</span><b> then </b>addressToAddress<span style=\"color: navy\">(</span><span style=\"color: maroon\">sourceAddress</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">targetAddress</span><span style=\"color: navy\">)</span> <i>&quot;Copy Address&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set address&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.Occupation<b> as </b><span style=\"color: maroon\">occupation</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    occupation<span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/StructureDefinition/Occupation'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">occupation</span> <i>&quot;set occupation value&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set occupation&quot;</i><span style=\"color: navy\">;</span>\r\n  demographics.WorkAddress<b> as </b><span style=\"color: maroon\">workAddress</span><span style=\"color: navy\"><b> -&gt; </b></span>patient.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    workAddress<span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://worldhealthorganization.github.io/smart-ot/StructureDefinition/WorkAddress'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">workAddress</span> <i>&quot;set work address value&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set work address&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>ReportingSourceToPractitioner<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">reportingSource</span><span style=\"color: navy\"> : </span>ReportingSourceLogicalModel, <b>target</b> <span style=\"color: maroon\">practitioner</span><span style=\"color: navy\"> : </span>Practitioner, <b>source</b> <span style=\"color: maroon\">prid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  prid<span style=\"color: navy\"><b> -&gt; </b></span>practitioner.id = <span style=\"color: maroon\">prid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n  reportingSource.ReportedBy<b> as </b><span style=\"color: maroon\">name</span><span style=\"color: navy\"><b> -&gt; </b></span> practitioner.name<b> as </b><span style=\"color: maroon\">humanName</span><span style=\"color: navy\">, </span> humanName.text = <span style=\"color: maroon\">name</span> <i>&quot;set name&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>ReportingSourceToOrganization<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">reportingSource</span><span style=\"color: navy\"> : </span>ReportingSourceLogicalModel, <b>target</b> <span style=\"color: maroon\">organization</span><span style=\"color: navy\"> : </span>Organization, <b>source</b> <span style=\"color: maroon\">oid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  oid<span style=\"color: navy\"><b> -&gt; </b></span>organization.id = <span style=\"color: maroon\">oid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n  reportingSource.HealthServiceName<b> as </b><span style=\"color: maroon\">name</span><span style=\"color: navy\"><b> -&gt; </b></span>organization.name = <span style=\"color: maroon\">name</span> <i>&quot;set name&quot;</i><span style=\"color: navy\">;</span>\r\n  reportingSource.HealthServiceTelephone<b> as </b><span style=\"color: maroon\">phoneSource</span><span style=\"color: navy\"><b> -&gt; </b></span> organization.contact<b> as </b><span style=\"color: maroon\">contactDetails</span><span style=\"color: navy\">, </span> contactDetails.telecom<b> as </b><span style=\"color: maroon\">phoneTarget</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    phoneSource<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">phoneSource</span><b> then </b>contactPointToContactPoint<span style=\"color: navy\">(</span><span style=\"color: maroon\">phoneSource</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">phoneTarget</span><span style=\"color: navy\">)</span> <i>&quot;set org contact&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set phone&quot;</i><span style=\"color: navy\">;</span>\r\n  reportingSource.PlaceOfReporting<b> as </b><span style=\"color: maroon\">locationSource</span><span style=\"color: navy\"><b> -&gt; </b></span> organization.contact<b> as </b><span style=\"color: maroon\">contactDetails</span><span style=\"color: navy\">, </span> contactDetails.address<b> as </b><span style=\"color: maroon\">locationTarget</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    locationSource<span style=\"color: navy\"><b> -&gt; </b></span><span style=\"color: maroon\">locationSource</span><b> then </b>contactPointToContactPoint<span style=\"color: navy\">(</span><span style=\"color: maroon\">locationSource</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">locationTarget</span><span style=\"color: navy\">)</span> <i>&quot;set org address&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set address&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>mapEncounters<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">clinical</span><span style=\"color: navy\"> : </span>SOTMeaslesClinical, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">section</span><span style=\"color: navy\"> : </span>Element, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  clinical.HistoryOfHospitalization<b> where </b>code = 'Yes'<b> then</b><span style=\"color: navy\"> {\r\n</span>    clinical.DateOfAdmission<b> as </b><span style=\"color: maroon\">date</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      date<span style=\"color: navy\"><b> -&gt; </b></span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span> type.code = <span style=\"color: blue\">'IMP'</span><span style=\"color: navy\">, </span> type.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/v3-ActCode'</span><span style=\"color: navy\">, </span> type.display = <span style=\"color: blue\">'inpatient encounter'</span><b> then </b>createEncounterResource<span style=\"color: navy\">(</span><span style=\"color: maroon\">date</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">section</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">type</span><span style=\"color: navy\">)</span> <i>&quot;create&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;d&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;dff&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>createEncounterResource<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">date</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">section</span><span style=\"color: navy\"> : </span>Element, <b>source</b> <span style=\"color: maroon\">pid</span>, <b>source</b> <span style=\"color: maroon\">type</span><span style=\"color: navy\"> : </span>Coding<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  date<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">eid</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> section.entry<b> as </b><span style=\"color: maroon\">sectionEntry</span><span style=\"color: navy\">, </span> sectionEntry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Encounter/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">eid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Encounter'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">encounter</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    date<span style=\"color: navy\"><b> -&gt; </b></span>encounter.id = <span style=\"color: maroon\">eid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n    date<span style=\"color: navy\"><b> -&gt; </b></span>encounter.status = <span style=\"color: blue\">'finished'</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n    pid<span style=\"color: navy\"><b> -&gt; </b></span> encounter.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n    date<span style=\"color: navy\"><b> -&gt; </b></span> encounter.period<b> as </b><span style=\"color: maroon\">period</span><span style=\"color: navy\">, </span> period.start = <span style=\"color: maroon\">date</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n    type<span style=\"color: navy\"><b> -&gt; </b></span>encounter.class = <span style=\"color: maroon\">type</span> <i>&quot;set type&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;dssd&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>createCompositionEncounterResource<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">date</span>, <b>source</b> <span style=\"color: maroon\">pid</span>, <b>source</b> <span style=\"color: maroon\">type</span><span style=\"color: navy\"> : </span>Coding, <b>source</b> <span style=\"color: maroon\">eid</span>, <b>target</b> <span style=\"color: maroon\">encounter</span><span style=\"color: navy\"> : </span>Encounter<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  date<span style=\"color: navy\"><b> -&gt; </b></span>encounter.id = <span style=\"color: maroon\">eid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n  date<span style=\"color: navy\"><b> -&gt; </b></span>encounter.status = <span style=\"color: blue\">'finished'</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n  pid<span style=\"color: navy\"><b> -&gt; </b></span> encounter.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set subject&quot;</i><span style=\"color: navy\">;</span>\r\n  date<span style=\"color: navy\"><b> -&gt; </b></span> encounter.period<b> as </b><span style=\"color: maroon\">period</span><span style=\"color: navy\">, </span> period.start = <span style=\"color: maroon\">date</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n  type<span style=\"color: navy\"><b> -&gt; </b></span>encounter.class = <span style=\"color: maroon\">type</span> <i>&quot;set type&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span></pre></div>"
  ] ; # 
  fhir:url [ fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureMap/MeaslesLogicalModelToResources"^^xsd:anyURI] ; # 
  fhir:version [ fhir:v "0.2.1"] ; # 
  fhir:name [ fhir:v "MeaslesLogicalModelToResources"] ; # 
  fhir:status [ fhir:v "draft"] ; # 
  fhir:date [ fhir:v "2023-11-07T05:59:29+00:00"^^xsd:dateTime] ; # 
  fhir:publisher [ fhir:v "WHO"] ; # 
  fhir:contact ( [
     fhir:name [ fhir:v "WHO" ] ;
     fhir:telecom ( [
       fhir:system [ fhir:v "url" ] ;
       fhir:value [ fhir:v "http://who.int" ]
     ] )
  ] ) ; # 
  fhir:jurisdiction ( [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "001" ]
     ] )
  ] ) ; # 
  fhir:structure ( [
     fhir:url [
       fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureDefinition/SOTMeaslesF"^^xsd:anyURI ;
       fhir:link <http://worldhealthorganization.github.io/smart-ot/StructureDefinition/SOTMeaslesF>
     ] ;
     fhir:mode [ fhir:v "source" ] ;
     fhir:alias [ fhir:v "MeaslesLogicalModel" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Bundle"^^xsd:anyURI ;
       fhir:link <http://hl7.org/fhir/StructureDefinition/Bundle>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "MeaslesCIFBundle" ]
  ] [
     fhir:url [
       fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureDefinition/MeaslesCIFComposition"^^xsd:anyURI ;
       fhir:link <http://worldhealthorganization.github.io/smart-ot/StructureDefinition/MeaslesCIFComposition>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "MeaslesCIFComposition" ]
  ] ) ; # 
  fhir:import ( [
     fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureMap/MetaDataTypesHelper"^^xsd:anyURI ;
     fhir:link <http://worldhealthorganization.github.io/smart-ot/StructureMap/MetaDataTypesHelper>
  ] ) ; # 
  fhir:group ( [
     fhir:name [ fhir:v "MeaslesLogicalModelToResources" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "lm" ] ;
       fhir:type [ fhir:v "SOTMeasles" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set bundle type" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "type" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "document" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set id" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "bid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "bid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set entries" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "cid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "pid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "prid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "oid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "eid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "map composition resource" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "resource" ] ;
           fhir:variable [ fhir:v "composition" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Composition" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "cid" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "lm" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "LmToComposition" ] ;
             fhir:variable ( [ fhir:v "lm" ] [ fhir:v "composition" ] [ fhir:v "cid" ] [ fhir:v "pid" ] [ fhir:v "prid" ] [ fhir:v "oid" ] [ fhir:v "eid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "map patient resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "pid" ]
             ] )
           ] [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "patient" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Patient" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "create patient" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ] ;
               fhir:element [ fhir:v "Demographics" ] ;
               fhir:variable [ fhir:v "demographics" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "demographics" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "DemographicsToPatient" ] ;
               fhir:variable ( [ fhir:v "demographics" ] [ fhir:v "patient" ] [ fhir:v "pid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "set patient as entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "patient" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "map practitioner resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "prid" ]
             ] )
           ] [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "practitioner" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Practitioner" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "create practitioner" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ] ;
               fhir:element [ fhir:v "ReportingSource" ] ;
               fhir:variable [ fhir:v "reportingSource" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "reportingSource" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "ReportingSourceToPractitioner" ] ;
               fhir:variable ( [ fhir:v "reportingSource" ] [ fhir:v "practitioner" ] [ fhir:v "prid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "set practitioner as entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "practitioner" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "map organization resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "oid" ]
             ] )
           ] [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "organization" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Organization" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "create organization" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ] ;
               fhir:element [ fhir:v "ReportingSource" ] ;
               fhir:variable [ fhir:v "reportingSource" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "reportingSource" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "ReportingSourceToOrganization" ] ;
               fhir:variable ( [ fhir:v "reportingSource" ] [ fhir:v "organization" ] [ fhir:v "oid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "set organization as entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "organization" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "map encounter resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "eid" ]
             ] )
           ] [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "encounter" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Encounter" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set encounter" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ] ;
               fhir:element [ fhir:v "ReportingSource" ] ;
               fhir:variable [ fhir:v "reportingSource" ]
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set encounter" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "reportingSource" ] ;
                 fhir:element [ fhir:v "DateOfConsultation" ] ;
                 fhir:variable [ fhir:v "date" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "create encounter" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "date" ]
                 ] ) ;
                 fhir:target ( [
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:variable [ fhir:v "type" ] ;
                   fhir:transform [ fhir:v "create" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "Coding" ]
                   ] )
                 ] [
                   fhir:context [ fhir:v "type" ] ;
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:element [ fhir:v "code" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "AMB" ]
                   ] )
                 ] [
                   fhir:context [ fhir:v "type" ] ;
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:element [ fhir:v "system" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "http://terminology.hl7.org/CodeSystem/v3-ActCode" ]
                   ] )
                 ] [
                   fhir:context [ fhir:v "type" ] ;
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:element [ fhir:v "display" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "ambulatory" ]
                   ] )
                 ] ) ;
                 fhir:dependent ( [
                   fhir:name [ fhir:v "createCompositionEncounterResource" ] ;
                   fhir:variable ( [ fhir:v "date" ] [ fhir:v "pid" ] [ fhir:v "type" ] [ fhir:v "eid" ] [ fhir:v "encounter" ] )
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "set encounter" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "reportingSource" ] ;
                 fhir:element [ fhir:v "DateOfHomeVisit" ] ;
                 fhir:variable [ fhir:v "date" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "create encounter" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "date" ]
                 ] ) ;
                 fhir:target ( [
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:variable [ fhir:v "type" ] ;
                   fhir:transform [ fhir:v "create" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "Coding" ]
                   ] )
                 ] [
                   fhir:context [ fhir:v "type" ] ;
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:element [ fhir:v "code" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "HH" ]
                   ] )
                 ] [
                   fhir:context [ fhir:v "type" ] ;
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:element [ fhir:v "system" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "http://terminology.hl7.org/CodeSystem/v3-ActCode" ]
                   ] )
                 ] [
                   fhir:context [ fhir:v "type" ] ;
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:element [ fhir:v "display" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "home health" ]
                   ] )
                 ] ) ;
                 fhir:dependent ( [
                   fhir:name [ fhir:v "createCompositionEncounterResource" ] ;
                   fhir:variable ( [ fhir:v "date" ] [ fhir:v "pid" ] [ fhir:v "type" ] [ fhir:v "eid" ] [ fhir:v "encounter" ] )
                 ] )
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set encounter as entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lm" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "encounter" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set clinical data" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "lm" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapClinicalToObservations" ] ;
             fhir:variable ( [ fhir:v "lm" ] [ fhir:v "bundle" ] [ fhir:v "composition" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set labs data" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "lm" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapLabsToDiagnosticReport" ] ;
             fhir:variable ( [ fhir:v "lm" ] [ fhir:v "bundle" ] [ fhir:v "composition" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set immunization data" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "lm" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapVaccinationStatusToImmunization" ] ;
             fhir:variable ( [ fhir:v "lm" ] [ fhir:v "bundle" ] [ fhir:v "composition" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set classification" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "lm" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "lm" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapClassificationToConditions" ] ;
             fhir:variable ( [ fhir:v "lm" ] [ fhir:v "bundle" ] [ fhir:v "composition" ] [ fhir:v "pid" ] [ fhir:v "eid" ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "mapClassificationToConditions" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "lm" ] ;
       fhir:type [ fhir:v "MeaslesLogicalModel" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "composition" ] ;
       fhir:type [ fhir:v "MeaslesCIFComposition" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "eid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set section" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "section" ] ;
         fhir:variable [ fhir:v "section" ]
       ] [
         fhir:context [ fhir:v "section" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "title" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Classification" ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "Set classification" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ] ;
           fhir:element [ fhir:v "Classification" ] ;
           fhir:variable [ fhir:v "classification" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "id" ] ;
           fhir:transform [ fhir:v "uuid" ]
         ] [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "id" ]
           ] )
         ] [
           fhir:context [ fhir:v "section" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "sectionEntry" ]
         ] [
           fhir:context [ fhir:v "sectionEntry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Condition/" ]
           ] [
             fhir:value [ fhir:v "id" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "resource" ] ;
           fhir:variable [ fhir:v "condition" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Condition" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set id" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "id" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "verificationStatus" ] ;
             fhir:variable [ fhir:v "tgtStatus" ]
           ] [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "status" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Coding" ]
             ] )
           ] [
             fhir:context [ fhir:v "status" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "confirmed" ]
             ] )
           ] [
             fhir:context [ fhir:v "status" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "http://terminology.hl7.org/CodeSystem/condition-ver-status" ]
             ] )
           ] [
             fhir:context [ fhir:v "status" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Confirmed" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapCodingtoCodeableConcept" ] ;
             fhir:variable ( [ fhir:v "status" ] [ fhir:v "tgtStatus" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set subject" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Patient/" ]
             ] [
               fhir:value [ fhir:v "pid" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set code" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ] ;
             fhir:element [ fhir:v "FinalClassification" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapCodingtoCodeableConcept" ] ;
             fhir:variable ( [ fhir:v "coding" ] [ fhir:v "code" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set subject" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "encounter" ] ;
             fhir:variable [ fhir:v "encounter" ]
           ] [
             fhir:context [ fhir:v "encounter" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Encounter/" ]
             ] [
               fhir:value [ fhir:v "eid" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "tgt" ]
           ] [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "status" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Coding" ]
             ] )
           ] [
             fhir:context [ fhir:v "status" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "encounter-diagnosis" ]
             ] )
           ] [
             fhir:context [ fhir:v "status" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "http://terminology.hl7.org/CodeSystem/condition-category" ]
             ] )
           ] [
             fhir:context [ fhir:v "status" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Encounter Diagnosis" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapCodingtoCodeableConcept" ] ;
             fhir:variable ( [ fhir:v "status" ] [ fhir:v "tgt" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ] ;
             fhir:element [ fhir:v "ClassificationDate" ] ;
             fhir:variable [ fhir:v "date" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "recordedDate" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "date" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set person" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "classification" ] ;
             fhir:element [ fhir:v "ClassifiedBy" ] ;
             fhir:variable [ fhir:v "person" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "rpid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "rpid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "RelatedPerson/" ]
             ] [
               fhir:value [ fhir:v "rpid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "recorder" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "RelatedPerson" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set id" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "person" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "recorder" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "rpid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "person" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "recorder" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "name" ] ;
               fhir:variable [ fhir:v "targetName" ]
             ] [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "name" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "HumanName" ]
               ] )
             ] [
               fhir:context [ fhir:v "name" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "text" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "person" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "humanNameToHumanName" ] ;
               fhir:variable ( [ fhir:v "name" ] [ fhir:v "targetName" ] )
             ] )
           ] [
             fhir:name [ fhir:v "set patient" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "person" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "recorder" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "patient" ] ;
               fhir:variable [ fhir:v "patient" ]
             ] [
               fhir:context [ fhir:v "patient" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "append" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Patient/" ]
               ] [
                 fhir:value [ fhir:v "pid" ]
               ] )
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "mapContactTracing" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "lm" ] ;
       fhir:type [ fhir:v "MeaslesLogicalModel" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "composition" ] ;
       fhir:type [ fhir:v "MeaslesCIFComposition" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "section" ] ;
         fhir:variable [ fhir:v "section" ]
       ] [
         fhir:context [ fhir:v "section" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "title" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Contact Tracing" ]
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "mapClinicalToObservations" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "lm" ] ;
       fhir:type [ fhir:v "SOTMeasles" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "composition" ] ;
       fhir:type [ fhir:v "Composition" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set section" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "section" ] ;
         fhir:variable [ fhir:v "section" ]
       ] [
         fhir:context [ fhir:v "section" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "title" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Clinical Data, Follow up and Treatment" ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set clinical" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ] ;
           fhir:element [ fhir:v "Clinical" ] ;
           fhir:variable [ fhir:v "clinical" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "clinical" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set fever" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Fever" ] ;
             fhir:variable [ fhir:v "fever" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "fever" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "fever" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE66" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Fever" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "fever" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "fever" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "fever" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] [
               fhir:name [ fhir:v "set start date" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "clinical" ] ;
                 fhir:element [ fhir:v "FeverOnsetDate" ] ;
                 fhir:variable [ fhir:v "onsetDate" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "period" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Period" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "period" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "start" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "onsetDate" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "observation" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "effective" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "period" ]
                 ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set Temperature" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Temperature" ] ;
             fhir:variable [ fhir:v "temperature" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "temperature" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "temperature" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE70" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Temperature" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "temperature" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "temperature" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "temperature" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set Rash" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Rash" ] ;
             fhir:variable [ fhir:v "rash" ] ;
             fhir:condition [ fhir:v "code != 'Yes'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "rash" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "rash" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE72" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Rash" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "rash" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "rash" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "rash" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set haemorrhagic" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "TypeOfRash" ] ;
             fhir:variable [ fhir:v "haemorrhagic" ] ;
             fhir:condition [ fhir:v "code = 'Haemorrhagic'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "haemorrhagic" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "haemorrhagic" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Haemorrhagic" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/RashType" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Haemorrhagic" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set value" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "haemorrhagic" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "ValueCoding" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Coding" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "code" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "system" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "display" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "set obs" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "haemorrhagic" ]
                 ] ) ;
                 fhir:target ( [
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "haemorrhagic" ]
                   ] )
                 ] ) ;
                 fhir:dependent ( [
                   fhir:name [ fhir:v "createObservationResource" ] ;
                   fhir:variable ( [ fhir:v "ValueCoding" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "set start date" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "clinical" ] ;
                 fhir:element [ fhir:v "RashOnsetDate" ] ;
                 fhir:variable [ fhir:v "onsetDate" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "period" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Period" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "period" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "start" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "onsetDate" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "observation" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "effective" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "period" ]
                 ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set erythematous" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "TypeOfRash" ] ;
             fhir:variable [ fhir:v "erythematous" ] ;
             fhir:condition [ fhir:v "code = 'Erythematous'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "erythematous" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "erythematous" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Erythematous" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/RashType" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Erythematous" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set value" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "erythematous" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "ValueCoding" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Coding" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "code" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "system" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "display" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "set obs" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "erythematous" ]
                 ] ) ;
                 fhir:target ( [
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "erythematous" ]
                   ] )
                 ] ) ;
                 fhir:dependent ( [
                   fhir:name [ fhir:v "createObservationResource" ] ;
                   fhir:variable ( [ fhir:v "ValueCoding" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "set start date" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "clinical" ] ;
                 fhir:element [ fhir:v "RashOnsetDate" ] ;
                 fhir:variable [ fhir:v "onsetDate" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "period" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Period" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "period" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "start" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "onsetDate" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "observation" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "effective" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "period" ]
                 ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set vesicularPustular" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "TypeOfRash" ] ;
             fhir:variable [ fhir:v "vesicularPustular" ] ;
             fhir:condition [ fhir:v "code = 'VesicularPustular'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vesicularPustular" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vesicularPustular" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Vesicular-pustular" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/RashType" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Vesicular Pustular" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set value" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "vesicularPustular" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "ValueCoding" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Coding" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "code" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "system" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "display" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "set obs" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "vesicularPustular" ]
                 ] ) ;
                 fhir:target ( [
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "vesicularPustular" ]
                   ] )
                 ] ) ;
                 fhir:dependent ( [
                   fhir:name [ fhir:v "createObservationResource" ] ;
                   fhir:variable ( [ fhir:v "ValueCoding" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
                 ] )
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set start date" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "clinical" ] ;
               fhir:element [ fhir:v "RashOnsetDate" ] ;
               fhir:variable [ fhir:v "onsetDate" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "period" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Period" ]
               ] )
             ] [
               fhir:context [ fhir:v "period" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "start" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "onsetDate" ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "effective" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "period" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set petechialPurpuric" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "TypeOfRash" ] ;
             fhir:variable [ fhir:v "petechialPurpuric" ] ;
             fhir:condition [ fhir:v "code = 'PetechialPurpuric'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "petechialPurpuric" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "petechialPurpuric" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Petechial-purpuric" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/RashType" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Petechial Purpuric" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set value" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "petechialPurpuric" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "ValueCoding" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Coding" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "code" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "system" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "display" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "set obs" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "petechialPurpuric" ]
                 ] ) ;
                 fhir:target ( [
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "petechialPurpuric" ]
                   ] )
                 ] ) ;
                 fhir:dependent ( [
                   fhir:name [ fhir:v "createObservationResource" ] ;
                   fhir:variable ( [ fhir:v "petechialPurpuric" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
                 ] )
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set start date" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "clinical" ] ;
               fhir:element [ fhir:v "RashOnsetDate" ] ;
               fhir:variable [ fhir:v "onsetDate" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "period" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Period" ]
               ] )
             ] [
               fhir:context [ fhir:v "period" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "start" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "onsetDate" ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "effective" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "period" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set other" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "TypeOfRash" ] ;
             fhir:variable [ fhir:v "other" ] ;
             fhir:condition [ fhir:v "code = 'Other'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "other" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "other" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Other" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/RashType" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Rash" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set value" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "other" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:variable [ fhir:v "ValueCoding" ] ;
                 fhir:transform [ fhir:v "create" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Coding" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "code" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "system" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "http://ritikarawlani.github.io/smart-outbreak-measles/YesNoUnknown" ]
                 ] )
               ] [
                 fhir:context [ fhir:v "ValueCoding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "display" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "Yes" ]
                 ] )
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "set obs" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "other" ]
                 ] ) ;
                 fhir:target ( [
                   fhir:contextType [ fhir:v "variable" ] ;
                   fhir:transform [ fhir:v "copy" ] ;
                   fhir:parameter ( [
                     fhir:value [ fhir:v "other" ]
                   ] )
                 ] ) ;
                 fhir:dependent ( [
                   fhir:name [ fhir:v "createObservationResource" ] ;
                   fhir:variable ( [ fhir:v "ValueCoding" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
                 ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set cough" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Cough" ] ;
             fhir:variable [ fhir:v "cough" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "cough" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "cough" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE84" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Cough" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "cough" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "cough" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "cough" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set conjunctivitis" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Conjunctivitis" ] ;
             fhir:variable [ fhir:v "conjunctivitis" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "conjunctivitis" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "conjunctivitis" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE88" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Conjunctivitis" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "conjunctivitis" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "conjunctivitis" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "conjunctivitis" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set coryza" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Coryza" ] ;
             fhir:variable [ fhir:v "coryza" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "coryza" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "coryza" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE92" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coryza" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "coryza" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "coryza" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "coryza" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set koplikSpots" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "KoplikSpots" ] ;
             fhir:variable [ fhir:v "koplikSpots" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "koplikSpots" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "koplikSpots" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE96" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Koplik Spots" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "koplikSpots" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "koplikSpots" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "koplikSpots" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set lymphadenopathy" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Lymphadenopathy" ] ;
             fhir:variable [ fhir:v "lymphadenopathy" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lymphadenopathy" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "lymphadenopathy" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE100" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Lymphadenopathy" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "lymphadenopathy" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "lymphadenopathy" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "lymphadenopathy" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set jointPain" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "JointPain" ] ;
             fhir:variable [ fhir:v "jointPain" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "jointPain" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "jointPain" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE104" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Joint Pain" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "jointPain" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "jointPain" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "jointPain" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set pregnancy" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "PregnancyStatus" ] ;
             fhir:variable [ fhir:v "pregnancy" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "pregnancy" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "pregnancy" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE108" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Pregnancy" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "pregnancy" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "pregnancy" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "pregnancy" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set pregnancy weeks" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "PregnancyStatus" ] ;
             fhir:variable [ fhir:v "pregnancy" ] ;
             fhir:condition [ fhir:v "code = 'Yes'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "pregnancy" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "clinical" ] ;
               fhir:element [ fhir:v "GestationWeeks" ] ;
               fhir:variable [ fhir:v "weeks" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE112" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Weeks Pregnant" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "weeks" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "weeks" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "weeks" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set outcome" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ] ;
             fhir:element [ fhir:v "Outcome" ] ;
             fhir:variable [ fhir:v "outcome" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "section" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "sectionEntry" ]
           ] [
             fhir:context [ fhir:v "sectionEntry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "outcome" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set obs" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "outcome" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:variable [ fhir:v "coding" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Coding" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DE121" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/PAHO_MRCIF" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "display" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Outcome" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "outcome" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "outcome" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "outcome" ] [ fhir:v "coding" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set start date" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "clinical" ] ;
               fhir:element [ fhir:v "DateOfDeath" ] ;
               fhir:variable [ fhir:v "onsetDate" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "effective" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "onsetDate" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set encounter" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "clinical" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "clinical" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapEncounters" ] ;
             fhir:variable ( [ fhir:v "clinical" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "createObservationResource" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "coding" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "observation" ] ;
       fhir:type [ fhir:v "Observation" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set code" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "code" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "CodeableConcept" ]
         ] )
       ] [
         fhir:context [ fhir:v "code" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "coding" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "coding" ]
         ] )
       ] [
         fhir:context [ fhir:v "observation" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "code" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "code" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set value" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "value" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "CodeableConcept" ]
         ] )
       ] [
         fhir:context [ fhir:v "value" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "coding" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "src" ]
         ] )
       ] [
         fhir:context [ fhir:v "observation" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "value" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "value" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set status" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "observation" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "status" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "registered" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set subject" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "observation" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "subject" ] ;
         fhir:variable [ fhir:v "subject" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set subject" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "subject" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Patient/" ]
           ] [
             fhir:value [ fhir:v "pid" ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "mapLabsToDiagnosticReport" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "lm" ] ;
       fhir:type [ fhir:v "MeaslesLogicalModel" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "composition" ] ;
       fhir:type [ fhir:v "MeaslesCIFComposition" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set section" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "section" ] ;
         fhir:variable [ fhir:v "section" ]
       ] [
         fhir:context [ fhir:v "section" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "title" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Specimens & Laboratory Testing" ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set diagnosticReport" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ] ;
           fhir:element [ fhir:v "LaboratoryResults" ] ;
           fhir:variable [ fhir:v "labs" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "id" ] ;
           fhir:transform [ fhir:v "uuid" ]
         ] [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "id" ]
           ] )
         ] [
           fhir:context [ fhir:v "section" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "sectionEntry" ]
         ] [
           fhir:context [ fhir:v "sectionEntry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "DiagnosticReport/" ]
           ] [
             fhir:value [ fhir:v "id" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "resource" ] ;
           fhir:variable [ fhir:v "diagnosticReport" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "DiagnosticReport" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set id" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "id" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set status" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "status" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "registered" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set subject" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Patient/" ]
             ] [
               fhir:value [ fhir:v "pid" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set code" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ] ;
             fhir:element [ fhir:v "Antigen" ] ;
             fhir:variable [ fhir:v "antigen" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapCodingtoCodeableConcept" ] ;
             fhir:variable ( [ fhir:v "antigen" ] [ fhir:v "code" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set specimen" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "id" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "id" ]
             ] )
           ] [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "specimen" ] ;
             fhir:variable [ fhir:v "refSpecimen" ]
           ] [
             fhir:context [ fhir:v "refSpecimen" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Specimen/" ]
             ] [
               fhir:value [ fhir:v "id" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "specimen" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Specimen" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "Set idn" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "specimen" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "id" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set date" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ] ;
               fhir:element [ fhir:v "SpecimenCollectionDate" ] ;
               fhir:variable [ fhir:v "collectDate" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "specimen" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "collection" ] ;
               fhir:variable [ fhir:v "collection" ]
             ] [
               fhir:context [ fhir:v "collection" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "collected" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "collectDate" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set date" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ] ;
               fhir:element [ fhir:v "SpecimenRecdDate" ] ;
               fhir:variable [ fhir:v "recdDate" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "specimen" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "receivedTime" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "recdDate" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set identifier" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ] ;
               fhir:element [ fhir:v "SampleId" ] ;
               fhir:variable [ fhir:v "sampleId" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "specimen" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "identifier" ] ;
               fhir:variable [ fhir:v "identifier" ]
             ] [
               fhir:context [ fhir:v "identifier" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "value" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "sampleId" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set type" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ] ;
               fhir:element [ fhir:v "SampleType" ] ;
               fhir:variable [ fhir:v "sampleType" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "specimen" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "type" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "sampleType" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set note" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ] ;
               fhir:element [ fhir:v "SpecimenNumber" ] ;
               fhir:variable [ fhir:v "number" ]
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set note" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "number" ] ;
                 fhir:element [ fhir:v "display" ] ;
                 fhir:variable [ fhir:v "text" ]
               ] ) ;
               fhir:target ( [
                 fhir:context [ fhir:v "specimen" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "note" ] ;
                 fhir:variable [ fhir:v "note" ]
               ] [
                 fhir:context [ fhir:v "note" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "text" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "text" ]
                 ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set performer" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "id" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "id" ]
             ] )
           ] [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "performer" ] ;
             fhir:variable [ fhir:v "performer" ]
           ] [
             fhir:context [ fhir:v "performer" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Organization/" ]
             ] [
               fhir:value [ fhir:v "id" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "perfOrg" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Organization" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set name" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ] ;
               fhir:element [ fhir:v "LabName" ] ;
               fhir:variable [ fhir:v "labName" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "perfOrg" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "name" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "labName" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set id" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "perfOrg" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "id" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set results" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "obsid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "entry" ]
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "urn:uuid:" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "result" ] ;
             fhir:variable [ fhir:v "result" ]
           ] [
             fhir:context [ fhir:v "result" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "append" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation/" ]
             ] [
               fhir:value [ fhir:v "obsid" ]
             ] )
           ] [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Observation" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set obsid" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "obsid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set antigen" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "labs" ] ;
               fhir:element [ fhir:v "Antigen" ] ;
               fhir:variable [ fhir:v "antigen" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "antigen" ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set obs" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "labs" ] ;
                 fhir:element [ fhir:v "Results" ] ;
                 fhir:variable [ fhir:v "result" ]
               ] ) ;
               fhir:target ( [
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "result" ]
                 ] )
               ] ) ;
               fhir:dependent ( [
                 fhir:name [ fhir:v "createObservationResource" ] ;
                 fhir:variable ( [ fhir:v "result" ] [ fhir:v "antigen" ] [ fhir:v "observation" ] [ fhir:v "pid" ] )
               ] )
             ] [
               fhir:name [ fhir:v "set start date" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "labs" ] ;
                 fhir:element [ fhir:v "LabResultsDate" ] ;
                 fhir:variable [ fhir:v "resultDate" ]
               ] ) ;
               fhir:target ( [
                 fhir:context [ fhir:v "observation" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "effective" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "resultDate" ]
                 ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set code" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ] ;
             fhir:element [ fhir:v "Antigen" ] ;
             fhir:variable [ fhir:v "antigen" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "antigen" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set date" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "labs" ] ;
             fhir:element [ fhir:v "LabResultsDate" ] ;
             fhir:variable [ fhir:v "resultDate" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "diagnosticReport" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "effective" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "resultDate" ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "createImmunizationResource" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "vax" ] ;
       fhir:type [ fhir:v "SOTMeaslesVaccinationStatus" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "section" ] ;
       fhir:type [ fhir:v "Element" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "ad" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "vax" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "entry" ]
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "urn:uuid:" ]
         ] [
           fhir:value [ fhir:v "id" ]
         ] )
       ] [
         fhir:context [ fhir:v "section" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "sectionEntry" ]
       ] [
         fhir:context [ fhir:v "sectionEntry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Immunization/" ]
         ] [
           fhir:value [ fhir:v "id" ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "immunization" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Immunization" ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set id" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vax" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "immunization" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "id" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "id" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set status" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vax" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "immunization" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "status" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "completed" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vax" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "immunization" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "vaccineCode" ] ;
           fhir:variable [ fhir:v "code" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set code" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vax" ] ;
             fhir:element [ fhir:v "VaccineType" ] ;
             fhir:variable [ fhir:v "vaccineType" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "vaccineType" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapCodingtoCodeableConcept" ] ;
             fhir:variable ( [ fhir:v "vaccineType" ] [ fhir:v "code" ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vax" ] ;
           fhir:element [ fhir:v "Source" ] ;
           fhir:variable [ fhir:v "source" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "immunization" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reportOrigin" ] ;
           fhir:variable [ fhir:v "origin" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set report origin" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "source" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "source" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "mapCodingtoCodeableConcept" ] ;
             fhir:variable ( [ fhir:v "source" ] [ fhir:v "origin" ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set date" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vax" ] ;
           fhir:element [ fhir:v "LastDoseDate" ] ;
           fhir:variable [ fhir:v "date" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "immunization" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "occurrence" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "date" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set dosenumber" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vax" ] ;
           fhir:element [ fhir:v "NumberOfDoses" ] ;
           fhir:variable [ fhir:v "doses" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "doses" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:variable [ fhir:v "seriesDose" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "immunization" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "protocolApplied" ] ;
             fhir:variable [ fhir:v "protocol" ]
           ] [
             fhir:context [ fhir:v "protocol" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "series" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "seriesDose" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set subject" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "vax" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "immunization" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "patient" ] ;
           fhir:variable [ fhir:v "subject" ]
         ] [
           fhir:context [ fhir:v "subject" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Patient/" ]
           ] [
             fhir:value [ fhir:v "pid" ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "mapVaccinationStatusToImmunization" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "lm" ] ;
       fhir:type [ fhir:v "MeaslesLogicalModel" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "composition" ] ;
       fhir:type [ fhir:v "MeaslesCIFComposition" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set section" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "section" ] ;
         fhir:variable [ fhir:v "section" ]
       ] [
         fhir:context [ fhir:v "section" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "title" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Vaccination History" ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set status" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ] ;
           fhir:element [ fhir:v "VaccinationStatus" ] ;
           fhir:variable [ fhir:v "vax" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "do" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vax" ] ;
             fhir:element [ fhir:v "NumberOfDoses" ] ;
             fhir:variable [ fhir:v "doses" ] ;
             fhir:condition [ fhir:v "code = '99'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "doses" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "createImmunizationResource" ] ;
             fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vax" ] ;
             fhir:element [ fhir:v "NumberOfDoses" ] ;
             fhir:variable [ fhir:v "doses" ] ;
             fhir:condition [ fhir:v "code = '1'" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "doses" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "do1" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ] ;
               fhir:element [ fhir:v "LastDoseDate" ] ;
               fhir:variable [ fhir:v "date" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "date" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set doses" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vax" ] ;
             fhir:element [ fhir:v "NumberOfDoses" ] ;
             fhir:variable [ fhir:v "doses" ] ;
             fhir:condition [ fhir:v "code = '2'" ]
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "do2" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "doses" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "doses" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ] ;
               fhir:element [ fhir:v "LastDoseDate" ] ;
               fhir:variable [ fhir:v "date" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "date" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set doses" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vax" ] ;
             fhir:element [ fhir:v "NumberOfDoses" ] ;
             fhir:variable [ fhir:v "doses" ] ;
             fhir:condition [ fhir:v "code = '3'" ]
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "doses" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "doses" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ] ;
               fhir:element [ fhir:v "LastDoseDate" ] ;
               fhir:variable [ fhir:v "date" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "date" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set doses" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vax" ] ;
             fhir:element [ fhir:v "NumberOfDoses" ] ;
             fhir:variable [ fhir:v "doses" ] ;
             fhir:condition [ fhir:v "code = '4'" ]
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "doses" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "doses" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "doses" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] [
             fhir:name [ fhir:v "do" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "vax" ] ;
               fhir:element [ fhir:v "LastDoseDate" ] ;
               fhir:variable [ fhir:v "date" ]
             ] ) ;
             fhir:target ( [
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "date" ]
               ] )
             ] ) ;
             fhir:dependent ( [
               fhir:name [ fhir:v "createImmunizationResource" ] ;
               fhir:variable ( [ fhir:v "vax" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] )
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "LmToComposition" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "lm" ] ;
       fhir:type [ fhir:v "SOTMeasles" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "composition" ] ;
       fhir:type [ fhir:v "Composition" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "cid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "prid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "oid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "eid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set id" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "cid" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "cid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set status" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "status" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "final" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set title" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "title" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "PAHO Measles Case Investigation Form" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set type" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "coding" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Coding" ]
         ] )
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "code" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "55751-2" ]
         ] )
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "system" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "http://loinc.org" ]
         ] )
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "display" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Public health Case report" ]
         ] )
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "code" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "CodeableConcept" ]
         ] )
       ] [
         fhir:context [ fhir:v "code" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "coding" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "coding" ]
         ] )
       ] [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "type" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "code" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set date reported local" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ] ;
         fhir:element [ fhir:v "ReportingSource" ] ;
         fhir:variable [ fhir:v "reportingSource" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "reportingSource" ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set date" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "reportingSource" ] ;
           fhir:element [ fhir:v "DateReportedLocal" ] ;
           fhir:variable [ fhir:v "date" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "composition" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "date" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "date" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set subject" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "subject" ] ;
         fhir:variable [ fhir:v "subject" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set subject" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "subject" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Patient/" ]
           ] [
             fhir:value [ fhir:v "pid" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set author practitioner" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "author" ] ;
         fhir:variable [ fhir:v "practitioner" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set author practitioner" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "practitioner" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Practitioner/" ]
           ] [
             fhir:value [ fhir:v "prid" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set author org" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "author" ] ;
         fhir:variable [ fhir:v "institution" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set author institution" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "institution" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Organization/" ]
           ] [
             fhir:value [ fhir:v "oid" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set encounter" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "lm" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "encounter" ] ;
         fhir:variable [ fhir:v "encounter" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set encounter" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "lm" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "encounter" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Encounter/" ]
           ] [
             fhir:value [ fhir:v "eid" ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "DemographicsToPatient" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "demographics" ] ;
       fhir:type [ fhir:v "DemographicsLogicalModel" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "MeaslesPatient" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set patient id" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "pid" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "pid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "Set name" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "Name" ] ;
         fhir:variable [ fhir:v "sourceName" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "name" ] ;
         fhir:variable [ fhir:v "targetName" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "Copy name" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "sourceName" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "sourceName" ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "humanNameToHumanName" ] ;
           fhir:variable ( [ fhir:v "sourceName" ] [ fhir:v "targetName" ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set date of birth" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "DateOfBirth" ] ;
         fhir:variable [ fhir:v "dob" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "birthDate" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "dob" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set sex" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "Sex" ] ;
         fhir:variable [ fhir:v "sex" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "gender" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "sex" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set CountryOfBirth" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "CountryOfBirth" ] ;
         fhir:variable [ fhir:v "cob" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "CountryOfBirth" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "cob" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set landmark" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "Landmark" ] ;
         fhir:variable [ fhir:v "landmark" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set landmark value" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "landmark" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureDefinition/Landmark" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "landmark" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set guardian" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "Guardian" ] ;
         fhir:variable [ fhir:v "guardian" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set guardian value" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "guardian" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureDefinition/Guardian" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "guardian" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "Set contact" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "Telephone" ] ;
         fhir:variable [ fhir:v "sourcePhone" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "telecom" ] ;
         fhir:variable [ fhir:v "targetPhone" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "Copy contact" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "sourcePhone" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "sourcePhone" ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "contactPointToContactPoint" ] ;
           fhir:variable ( [ fhir:v "sourcePhone" ] [ fhir:v "targetPhone" ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set address" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "PlaceOfResidence" ] ;
         fhir:variable [ fhir:v "sourceAddress" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "address" ] ;
         fhir:variable [ fhir:v "targetAddress" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "Copy Address" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "sourceAddress" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "sourceAddress" ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "addressToAddress" ] ;
           fhir:variable ( [ fhir:v "sourceAddress" ] [ fhir:v "targetAddress" ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set occupation" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "Occupation" ] ;
         fhir:variable [ fhir:v "occupation" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set occupation value" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "occupation" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureDefinition/Occupation" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "occupation" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set work address" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "demographics" ] ;
         fhir:element [ fhir:v "WorkAddress" ] ;
         fhir:variable [ fhir:v "workAddress" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set work address value" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "workAddress" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://worldhealthorganization.github.io/smart-ot/StructureDefinition/WorkAddress" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "workAddress" ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "ReportingSourceToPractitioner" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "reportingSource" ] ;
       fhir:type [ fhir:v "ReportingSourceLogicalModel" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "practitioner" ] ;
       fhir:type [ fhir:v "Practitioner" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "prid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set id" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "prid" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "practitioner" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "prid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set name" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "reportingSource" ] ;
         fhir:element [ fhir:v "ReportedBy" ] ;
         fhir:variable [ fhir:v "name" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "practitioner" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "name" ] ;
         fhir:variable [ fhir:v "humanName" ]
       ] [
         fhir:context [ fhir:v "humanName" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "text" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "name" ]
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "ReportingSourceToOrganization" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "reportingSource" ] ;
       fhir:type [ fhir:v "ReportingSourceLogicalModel" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "organization" ] ;
       fhir:type [ fhir:v "Organization" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "oid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set id" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "oid" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "organization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "oid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set name" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "reportingSource" ] ;
         fhir:element [ fhir:v "HealthServiceName" ] ;
         fhir:variable [ fhir:v "name" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "organization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "name" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "name" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set phone" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "reportingSource" ] ;
         fhir:element [ fhir:v "HealthServiceTelephone" ] ;
         fhir:variable [ fhir:v "phoneSource" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "organization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "contact" ] ;
         fhir:variable [ fhir:v "contactDetails" ]
       ] [
         fhir:context [ fhir:v "contactDetails" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "telecom" ] ;
         fhir:variable [ fhir:v "phoneTarget" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set org contact" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "phoneSource" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "phoneSource" ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "contactPointToContactPoint" ] ;
           fhir:variable ( [ fhir:v "phoneSource" ] [ fhir:v "phoneTarget" ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set address" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "reportingSource" ] ;
         fhir:element [ fhir:v "PlaceOfReporting" ] ;
         fhir:variable [ fhir:v "locationSource" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "organization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "contact" ] ;
         fhir:variable [ fhir:v "contactDetails" ]
       ] [
         fhir:context [ fhir:v "contactDetails" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "address" ] ;
         fhir:variable [ fhir:v "locationTarget" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set org address" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "locationSource" ]
         ] ) ;
         fhir:target ( [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "locationSource" ]
           ] )
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "contactPointToContactPoint" ] ;
           fhir:variable ( [ fhir:v "locationSource" ] [ fhir:v "locationTarget" ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "mapEncounters" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "clinical" ] ;
       fhir:type [ fhir:v "SOTMeaslesClinical" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "section" ] ;
       fhir:type [ fhir:v "Element" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "dff" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "clinical" ] ;
         fhir:element [ fhir:v "HistoryOfHospitalization" ] ;
         fhir:condition [ fhir:v "code = 'Yes'" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "d" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "clinical" ] ;
           fhir:element [ fhir:v "DateOfAdmission" ] ;
           fhir:variable [ fhir:v "date" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "create" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "date" ]
           ] ) ;
           fhir:target ( [
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:variable [ fhir:v "type" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Coding" ]
             ] )
           ] [
             fhir:context [ fhir:v "type" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "IMP" ]
             ] )
           ] [
             fhir:context [ fhir:v "type" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "http://terminology.hl7.org/CodeSystem/v3-ActCode" ]
             ] )
           ] [
             fhir:context [ fhir:v "type" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "inpatient encounter" ]
             ] )
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "createEncounterResource" ] ;
             fhir:variable ( [ fhir:v "date" ] [ fhir:v "bundle" ] [ fhir:v "section" ] [ fhir:v "pid" ] [ fhir:v "type" ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "createEncounterResource" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "date" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "section" ] ;
       fhir:type [ fhir:v "Element" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "type" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "dssd" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "date" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "eid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "entry" ]
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "urn:uuid:" ]
         ] [
           fhir:value [ fhir:v "eid" ]
         ] )
       ] [
         fhir:context [ fhir:v "section" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "sectionEntry" ]
       ] [
         fhir:context [ fhir:v "sectionEntry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Encounter/" ]
         ] [
           fhir:value [ fhir:v "eid" ]
         ] )
       ] [
         fhir:context [ fhir:v "entry" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "encounter" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Encounter" ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set id" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "date" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "encounter" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "id" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "eid" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set status" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "date" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "encounter" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "status" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "finished" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set subject" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "pid" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "encounter" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "subject" ] ;
           fhir:variable [ fhir:v "subject" ]
         ] [
           fhir:context [ fhir:v "subject" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Patient/" ]
           ] [
             fhir:value [ fhir:v "pid" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set date" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "date" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "encounter" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "period" ] ;
           fhir:variable [ fhir:v "period" ]
         ] [
           fhir:context [ fhir:v "period" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "start" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "date" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set type" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "type" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "encounter" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "class" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "type" ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "createCompositionEncounterResource" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "date" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "type" ] ;
       fhir:type [ fhir:v "Coding" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "eid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "encounter" ] ;
       fhir:type [ fhir:v "Encounter" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set id" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "date" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "encounter" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "eid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set status" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "date" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "encounter" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "status" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "finished" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set subject" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "pid" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "encounter" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "subject" ] ;
         fhir:variable [ fhir:v "subject" ]
       ] [
         fhir:context [ fhir:v "subject" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Patient/" ]
         ] [
           fhir:value [ fhir:v "pid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set date" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "date" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "encounter" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "period" ] ;
         fhir:variable [ fhir:v "period" ]
       ] [
         fhir:context [ fhir:v "period" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "start" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "date" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set type" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "type" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "encounter" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "class" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "type" ]
         ] )
       ] )
     ] )
  ] ) . # 

# -------------------------------------------------------------------------------------

